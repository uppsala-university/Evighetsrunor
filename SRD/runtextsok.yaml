openapi: 3.0.2
info:
  title: Samnordisk runtextdatabas söktjänst API
  description: Samnordisk runtextdatabas (SRD) söktjänst API. Specification för Riksantikvarieämbetets
    forskningsplattform för runor inom projektet Evighetsrunor. API:et används för
    att hitta och söka i runtexter i SRD. Sökresultaten innehåller endast grundinformationen
    om runtexterna (id:n, text och geografiska koordinater). Ytterligare metadata
    runt runtexterna, bärarobjekt samt kopplad information hämtas via K-samsök.
  contact:
    url: https://www.raa.se/kulturarv/runor-och-runstenar/projektet-evighetsrunor/
  version: 0.9.18
servers:
  - description: Uppsala Universitet Evighetsrunor API
    url: http://runor.test.uu.se/rest/

### Generella implementationsregler i API:et ###
# Regel 1: Arrayer har alltid ett värde.
#  Dvs om ett en array saknar värde så har den noll elemement. Effekten blir att en array kan aldrig ha värdet null.
# Regel 2: Ingående objekt (subobjekt) i en respons har alltid ett värde.
# Dvs om responsen innehåller ett subobjekt "provenance" så är objektet alltid definierat. Subobjekt kan aldrig ha värdet null.

## Angående hur vi tolkar required och nullable ##
# Regel 3: Tolkning av required: Attributet ingår alltid i responseobjektet, oavsett om attributet har ett värde eller ej.
# Specifikation för "required" i ett schemaobject: https://swagger.io/specification/#schemaObject
# Regel 4: Tolkning av nullable: Om ett attribut är deklarerat med värdet Nullable: false så innebär det att attributet alltid förväntas innehålla ett värde.
# Om nullable däremot är true - då ingår alltid variablen i responsen men kan ha värdet null.
# Ex: {"period": null, ...}"
# Defaultvärdet för nullable är false. Så om en variabel inte är deklarerad med "nullable" innebär det att den får värdet false.
# Specifikation för "nullable" i ett schemaobject:  https://swagger.io/specification/#schemaNullable

#### Utestående frågor #####
# Sök efter TODO i detta dokument. Där finns en utestående fråga.

paths:
  /signa:
    get:
      tags:
        - Enkel sökning
      summary: Hämtar lista med signum och dess kopplade runinskrifters identiteter.
      description: |
        Hämtar en lista med signum  och dess kopplade runinskrifters identiteter (uuid). <br>
        Lämpligt att användas för typeahead ändamål vid sökning/hämtning av signum. <br>
        Notera att minst 2 tecken måste anges för att sökningen ska utföras. <br>
        Sökträffar sorteras i fallande bokstavsordning enligt naturligt språk för en runforskare. Se responseobjekt för exempel.
      parameters:
        - name: edition_id
          in: query
          description: Anger id för önskad utgåva.
          required: true
          schema:
            type: string
            example: 2020
        - name: matching_text
          in: query
          description: Anger initala tecken i de signum som eftersöks. Case insensitive, dvs "Öl" eller "öl" ger samma sökresultat.
          schema:
            type: string
            minLength: 2
            example: "U "
      responses:
        200:
          description: |
            En sorterad lista med signum returneras. <br>
            Signumen sorteras i fallande bokstavsordning enligt naturligt språk för en runforskare. <br>
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Signum'
                example:
                  - "Öl 1 ..."
                  - "Öl 2 ..."
                  - "Öl 2b ..."
                  - "Öl 10 ..."
                  - "Öl ANF1937;184 ..."
                  - "Öl ANF1937;185 ..."
        400:
          description: (Bad request). Felaktigt indata angavs till tjänsten (typiskt valideringsfel).
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        404:
          description: (Not found). Inga poster hittades.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        500:
          description: (Internal server error). Ett oväntat fel inträffade.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /places:
    get:
      tags:
        - Enkel sökning
      summary: Hämtar lista med platser (places) för angivet sökvillkor.
      description: |
        Hämtar lista med platser (places) för angivet sökvillkor.<br>
        Lämpligt att användas som typeahead för att kunna göra sökningar efter signum. <br>
        Notera att minst 2 tecken måste anges för att sökningen ska utföras. <br>
        Sökträffar sorteras i fallande bokstavsordning.
      parameters:
        - name: edition_id
          in: query
          description: Anger id för önskad utgåva.
          required: true
          schema:
            type: string
            example: 2020
        - name: matching_text
          in: query
          description: Anger initiala tecken i namnet på plats som eftersöks. Case insensitive, dvs "bor" eller "Bor" ger samma sökresultat.
          schema:
            type: string
            minLength: 2
            example: "Resmo "
      responses:
        200:
          description: |
            En sorterad lista med namn på platser returneras. <br>
            Platserna sorteras i fallande bokstavsordning.
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
                example: "[Fors, Fors kyrka, Forsa kyrka]"
        400:
          description: (Bad request). Felaktigt indata angavs till tjänsten (typiskt valideringsfel).
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        404:
          description: (Not found). Inga poster hittades.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        500:
          description: (Internal server error). Ett oväntat fel inträffade.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /runetexttypes:
    get:
      tags:
        - Avancerad sökning
      summary: Hämtar alla möjliga runtexttyper som en sökning kan göras utifrån.
      description: Runtexttyper att använda när en sökfråga sätts samman
      parameters:
        - name: edition_id
          in: query
          description: Id för önskad utgåva
          required: true
          schema:
            type: string
      responses:
        200:
          description: (OK)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RuneTextType'
        400:
          description: (Bad request). Felaktigt indata angavs till tjänsten (typiskt valideringsfel).
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        500:
          description: (Internal server error). Ett oväntat fel inträffade.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /selection/groups:
    get:
      tags:
        - Avancerad sökning
      summary: Hämtar lista med urvalsgrupper
      description: Hämtar lista med urvalsgrupper att användas när man sätter filtervillkor för en avancerad sökning.
        Dessa används sedan som input till exempelvis tjänsten /selection/groups/{group_id} mfl.
      parameters:
        - name: edition_id
          in: query
          description: Id för önskad utgåva
          required: true
          schema:
            type: string
      responses:
        200:
          description: En lista med urvalsgrupper
          content:
            application/json:
              schema:
                type: array
                items:
                  type: string
                #  $ref: '#/components/schemas/SelectionGroup'
                example: "[LAND, LANDSKAP, HARAD, SOCKEN, LAN, KOMMUN, FOREMAL, RUNOLOGISK_PERIOD, PROFILSTIL, RISTARE, BRAKTEATYP]"
        400:
          description: (Bad request). Felaktigt indata angavs till tjänsten (typiskt valideringsfel).
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        500:
          description: (Internal server error). Ett oväntat fel inträffade.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /selection/groups/{group_id}:
    get:
      tags:
        - Avancerad sökning
      summary: Hämtar lista med urval
      description: Hämtar lista med urval för en urvalsgrupp att användas när man
        sätter filtervillkor för en avancerad sökning
      parameters:
        - name: edition_id
          in: query
          description: Id för önskad utgåva
          required: true
          schema:
            type: string
        - name: group_id
          in: path
          description: Id för urvalsgrupp.
          required: true
          schema:
            type: string
            example: 'LAND, LANDSKAP, SOCKEN, ..., RUNOLOGISK_PERIOD, RAK, INGULV, A'
        - name: matching_text
          in: query
          description: Anger initiala tecken i del av namn på urval som eftersöks. Case insensitive, dvs "bor" eller "Bor" ger samma sökresultat.
          schema:
            type: string
            minLength: 2
            example: "Sve"
      responses:
        200:
          description: En lista med urval.
          content:
            application/json:
              schema:
                type: array
                example:
                  - id: ca79d466-888f-4011-b5bd-35fc6dd1d622
                    name: Sverige
                    has_children: false
                  - id: 25a4de16-c421-41ed-8d17-fc465fd03db1
                    name: Bok
                    has_children: false
                  - id: b70ec612-cef6-446d-afc0-4e3387804858
                    name: 'Urnordisk/vikingatid'
                    has_children: false
                  - id: c95ec612-cef6-446d-afc0-4e3387804752
                    name: 'RAK'
                    has_children: false
                  - id: b70ec612-cef6-446d-afc0-4e3387804842
                    name: '...'
                    has_children: false
                items:
                  $ref: '#/components/schemas/SelectionItem'
        400:
          description: (Bad request). Felaktigt indata angavs till tjänsten (typiskt valideringsfel).
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        404:
          description: (Not found). Gruppen saknas.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                status: 404
                message: Gruppen saknas
                path: /selection/12/test
                timestamp: 1990-12-31T23:59:60Z
        500:
          description: (Internal server error). Ett oväntat fel inträffade.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /selection/groups/{group_id}/{subgroup_id}:
    get:
      tags:
        - Avancerad sökning
      summary: Hämtar lista med urval där både grupp och subgrupp kan anges för att sätta filtervillkor för en avancerad sökning.
      description: Hämtar lista med urval där både grupp och subgrupp kan anges för att sätta filtervillkor för en avancerad sökning.
      parameters:
        - name: edition_id
          in: query
          description: Id för önskad utgåva
          required: true
          schema:
            type: string
        - name: group_id
          in: path
          description: Id för urvalsgrupp.
          required: true
          schema:
            type: string
            example: 'MATERIALTYP, KORSFORM'
        - name: subgroup_id
          in: path
          description: Anger subgroupId för urvalsgruppen.
          required: true
          schema:
            type: string
            example: 'BEN/HORN, METALL, STEN, ... A ,B , C, ...'
        - name: matching_text
          in: query
          description: Anger initiala tecken i del av namn på urval som eftersöks. Case insensitive, dvs "bor" eller "Bor" ger samma sökresultat.
          schema:
            type: string
            minLength: 1
            example: "Ben/H"
      responses:
        200:
          description: En lista med urval.
          content:
            application/json:
              schema:
                type: array
                example:
                  - id: ca79d466-888f-4011-b5bd-35fc6dd1d622
                    name: Sverige
                    has_children: false
                  - id: 25a4de16-c421-41ed-8d17-fc465fd03db1
                    name: Bok
                    has_children: false
                  - id: b70ec612-cef6-446d-afc0-4e3387804858
                    name: 'Urnordisk/vikingatid'
                    has_children: false
                  - id: c95ec612-cef6-446d-afc0-4e3387804752
                    name: 'RAK'
                    has_children: false
                  - id: b70ec612-cef6-446d-afc0-4e3387804842
                    name: '...'
                items:
                  $ref: '#/components/schemas/SelectionItem'
        400:
          description: (Bad request). Felaktigt indata angavs till tjänsten (typiskt valideringsfel).
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        404:
          description: (Not found). Gruppen saknas.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                status: 404
                message: Gruppen saknas
                path: /selection/12/test
                timestamp: 1990-12-31T23:59:60Z
        500:
          description: (Internal server error). Ett oväntat fel inträffade.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /search:
    get:
      tags:
        - Enkel sökning
      summary: Enkel sökning. Sök efter runinskrifter med platsnamn eller signum.
      description: |
        Enkel sökning. Sök efter runinskrifter med platsnamn eller signum. <br>
        Om inga sökresultat hittades returneras en tom array. <br>
        Sökresultat sorteras i fallande bokstavsordning enligt naturligt språk. <br>
        Exempel 1: Öl 1, Öl 2, Öl 10. <br>
        Exempel 2: Ög 35, Ög 36, Ög 36B, Ög 37, Ög. <br>
        Exempel 3: .... Ög 247, Ög 248, Ög ANF1937;184, Ög ANF1937;185 .... <br>
      parameters:
        - name: edition_id
          in: query
          description: Id för önskad utgåva
          required: true
          schema:
            type: string
            example: "2020"
        - name: matching_text
          in: query
          description: |
            Söksträng. Träffar fås endast på exakt sträng. D v s strängen "Fors" kommer endast ge
            träff på inskrifter i "Fors", och ej på inskrifter i "Fors kyrka" eller "Forsa kyrka".
          required: true
          schema:
            type: string
            example: "'Resmo kyrka' eller 'Öl 10'"
        - name: search_field
          in: query
          description: Sökfält
          required: true
          schema:
            type: string
            enum:
              - PLACE
              - SIGNUM
      responses:
        200:
          description: (OK)
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/RunicInscriptionIndex'
        400:
          description: (Bad request). Felaktigt indata angavs till tjänsten (typiskt valideringsfel).
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        500:
          description: (Internal server error). Ett oväntat fel inträffade.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

    post:
      tags:
        - Avancerad sökning
      summary: Avancerad sökning i runtexter enligt sökvillkor
      description: Sök i runtexter enligt kombinerade sökvillkor för text samt filtrering
        enligt urval
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SearchQuery'
        required: true
      responses:
        200:
          description: Hittade runtexter med markering av hittade ord
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/SearchResult'
        500:
          description: (Internal server error). Ett oväntat fel inträffade.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      x-codegen-request-body-name: query
  /map:
    get:
      tags:
        - Karta
      summary: Hämtar alla geografiska punkter
      description: Hämtar alla geografiska punkter där runinskriptioner finns eller
        har hittats
      parameters:
        - name: edition_id
          in: query
          description: Id för önskad utgåva
          required: true
          schema:
            type: string
        - name: bbox
          in: query
          description: |
            Anger koordinater i kommaseparerad lista för spatial utsökning i bboxformat.
            Koordinatsystem för angivna geometrier (latitud, longitud) förväntas vara WGS84 (EPSG:4326) angivet i decimalgrader.
            Koordinaterna förväntas anges enligt ordning: bbox = min Longitude , min Latitude , max Longitude , max Latitude.
            Exempel: 16,56,17,57.5
          required: true
          schema:
            type: string
      responses:
        200:
          description: (OK). Poster hittades.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/MapIndex'
        400:
          description: (Bad request). Felaktigt indata angavs till tjänsten (typiskt valideringsfel).
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        500:
          description: (Internal server error). Ett oväntat fel inträffade.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /inscriptions/{id}:
    get:
      tags:
        - Runtexter
      summary: Hämtar en runinskrift med hjälp av uuid.
      description: Hämtar en runinskrift med hjälp av uuid.
      parameters:
        - in: path
          name: id
          description: Anger identiteten till inskriften (uuid).
          required: true
          schema:
            type: string
            format: uuid
        - name: edition_id
          in: query
          description: Id för önskad utgåva
          required: true
          schema:
            type: string
      responses:
        200:
          description: (OK). Post hittades
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RunicInscription'
        404:
          description: (Not found). Ingen träff
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                status: 404
                message: Signum eller URI saknas
                path: /selection/12/test
                timestamp: 1990-12-31T23:59:60Z
        500:
          description: (Internal server error). Ett oväntat fel inträffade.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'

  /editions:
    get:
      tags:
        - Utgåva
        - Not implemented
      summary: Hämtar en lista med utgåvor
      description: Hämtar en lista med utgåvor
      responses:
        200:
          description: (OK). Poster hittades
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Edition'
        404:
          description: (Not found). Ingen träff
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
              example:
                status: 404
                message: Utgåvor saknas
                path: /editions
                timestamp: 2001-12-31T23:59:60Z
        500:
          description: (Internal server error). Ett oväntat fel inträffade.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
  /editions/{edition_id}/download:
    get:
      tags:
        - Utgåva
        - Not implemented
      summary: Hämtar all data i en utgåva
      description: 'Hämtar en fil som innehåller all data i en utgåva. TODO bestämma vilket format som returneras.'
      parameters:
        - name: edition_id
          in: path
          description: Id för önskad utgåva
          required: true
          schema:
            type: string
      responses:
        200:
          description: (OK). Poster hittades
          content: {}
        404:
          description: (Not found). Ingen träff
          content:
            application/octet-stream:
              schema:
                $ref: '#/components/schemas/Error'
            application/json:
              example:
                status: 404
                message: Utgåva saknas
                path: /editions/1987
                timestamp: 2018-12-31T23:59:60Z
        500:
          description: (Internal server error). Ett oväntat fel inträffade.
          content:
            application/octet-stream:
              schema:
                $ref: '#/components/schemas/Error'

  /echo/{message}:
    get:
      summary: Tjänst avsedd för att utföra sambandstest. Tjänsten returnerar det argument soma angavs som inparameter i anropet.
      parameters:
        - in: path
          name: message
          description: Värdet för det 'eko' som ska returneras tillbaka till klienten.
          required: true
          schema:
            type: string
            example: "Hurra! Anropet lyckades."
      responses:
        '200':
          description: (OK). Ett json-objekt med attributet 'echo' returneras.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Echo'
        '500':
          description: (Internal server error). Ett oväntat fel inträffade.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
      tags:
        - Övriga tjänster
components:
  schemas:
    Cross:
      type: object
      description: Objektrepresentation av ett kors. Beskriver hur korsets olika delar ser ut enligt ett schema skapat av Linn Lager.
      properties:
        cross_forms:
          type: array
          items:
            $ref: '#/components/schemas/CrossForm'

    CrossForm:
      type: object
      description: JSON-representation av korsformer. Beskriver hur korsets olika delar ser ut enligt ett schema skapat av Linn Lager.
      properties:
        aspect:
          description: Anger raden - dvs "versalen" för en korsform. Korsets övergripande form.
          type: string
          example:
            C
        form:
          description: Anger kolumnen - dvs "siffran" för en korsform. Anger hur delen av ett kors ser ut.
          type: string
          example:
            3

    Echo:
      type: object
      description: Objekt för att representera svaret till echo-tjänsten.
      properties:
        echo:
          description: Anger värdet som som skickades in till tjänsten.
          type: string
          example: Hurra! Tjänsten svarar. Anropet lyckades.
    Edition:
      required:
        - id
      type: object
      properties:
        id:
          type: string
          description: Identitet på utgåvan
          example: "2018"
        name:
          type: string
          description: Namn på utgåvan
          example: 2018 års utgåva av Samnordisk runtextdatabas
        latest:
          type: boolean
          description: Anger om utgåvan är den aktuella (senast utgivna)
          example: true
        download:
          type: string
          description: Anger URL för att ladda ner all data i en utgåva
          example: /editions/2018/download
      description: En utgåva (version)

    Error:
      required:
        - message
        - path
        - status
        - timestamp
      type: object
      properties:
        status:
          type: integer
          description: Http statuskod
          example: 500
        message:
          type: string
          description: Innehåller ett felmeddelande tänkt att presenteras för slutanvändare
          example: Tekniskt fel, försök senare
        exception:
          type: string
          description: Innehåller ett felmeddelande tänkt för tekniker vid felsökning
          example: java.lang.NullPointerException
        path:
          type: string
          description: Anger den resourcepath där felet uppstod
          example: /selection/13/Test
        timestamp:
          type: string
          description: Anger tidpunkten när felet inträffade. Tidpunkt angiven som
            date-time, se RFC3339 (Internet Date/Time Format)
          format: dateTime
          example: 2019-01-04T23:59:60Z
      description: Ett fel

    Geometry:
      type: object
      description: |
        Objektrepresentation av en geografisk position uttryckt enligt GeoJSON[2016] specificatioenen. Se https://tools.ietf.org/html/rfc7946.
        Notera att koordinatsystemet för angivna koordinater är uttryckta i WGS84 (EPSG:4326). Se: https://tools.ietf.org/html/rfc7946#section-4
        "The coordinate reference system for all GeoJSON coordinates is a geographic coordinate reference system, using the World Geodetic System 1984 (WGS 84) [WGS84] datum,
        with longitude and latitude units of decimal degrees.
        This is equivalent to the coordinate reference system identified by the Open Geospatial Consortium (OGC) URN urn:ogc:def:crs:OGC::CRS84."
      properties:
        type:
          description: Anger tillåtna koordinattyper för geometrin.
          type: string
          enum:
            - Point
          example: Point
        coordinates:
          description: |
            Anger koordinater för geometrin. Exemplet uttryckt enligt longitude, latitude.
            Se: https://tools.ietf.org/html/rfc7946#appendix-A.1
            "Point coordinates are in x, y order (easting, northing for projected coordinates, longitude, and latitude for geographic coordinates)".
          type: array
          items:
            type: number
            example: "18.31511, 57.159624"

    Interpretation:
      type: object
      description: Objektrepresentation av en Interpretation (transliterering).
      properties:
        text:
          description: Anger transliterering av en text
          type: string
          nullable: true
          example: Bengt lät resa denna sten efter sin moder...  (på fornnordiska)
        language:
          type: string
          nullable: true
          description: Anger språket som translitterering är uttryckt i.
          example: Fornvästnordiska.

    Nmr:
      type: object
      description: Objektrepresentation av National Monument Registers (NMR) identifierare kopplade till inskriftsbäraren i andra informationssystem.
      properties:
        country:
          description: Anger vilket land de kopplade NMR-identiteterna tillhör.
            Danmark, Skottland, Norge, Sverige
          type: string
          enum:
            - dk
            - gb_sc
            - "no" # Use quotes to avoid parsing no as false. https://github.com/swagger-api/swagger-parser/issues/1205
            - se
          example: se
        identifiers:
          description: Array över nmr-identiteter.
          type: array
          items:
            $ref: '#/components/schemas/NmrIdentifier'

    NmrIdentifier:
      type: object
      description: Objektrepresentation av en nyckel-värde par för en nmr-identifiere.
      properties:
        key:
          description: Anger typen av nmr-identitet.
          type: string
          example: fmisid
        value:
          description: Anger värdet för nmr-identiteten.
          type: string
          example: abc123

    Material:
      type: object
      required:
        - material
        - materialtype
      description: Objektrepresentation av en materialförekomst för inskriftsbärare.
      properties:
        material:
          description: Anger det material som inskriftsbäraren består av.
          type: string
          example: granit
        material_type:
          description: Anger typen i form av grov indelning av det material som inskriftsbäraren består av.
          type: string
          example: sten

    PagedRunicInscriptionResponse:
      type: object
      properties:
        content:
          type: array
          description: Runinskrifter
          items:
            $ref: '#/components/schemas/RunicInscription'
        total_pages:
          type: integer
          description: Totalt antal sidor som kan hämtas
          example: 84
        total_elements:
          type: integer
          description: Totalt antal objekt som kan hämtas
          example: 8345
        last:
          type: boolean
          description: Anger om aktuell sida är den sista
          example: false
        sort:
          type: string
          description: Anger vilken sortering som använts
          example: sort=id
        first:
          type: boolean
          description: Anger om aktuell sida är den första
          example: true
        number_of_elements:
          type: integer
          description: Antal objekt i aktuellt svar
          example: 100
        size:
          type: integer
          description: Anger antal objekt per sida
          example: 100
        number:
          type: integer
          description: Sidnummer
          example: 0
      description: Paginerat svar med runinskription

    ProfileStyle:
      description: Objektrepresentation som anger med vilken profilstil som inskriftsbäraren är ristad. Används bara om inskriftsbäraren är en runsten.
      type: object
      properties:
        style:
          description: Anger med vilken profilstil som inskriftsbäraren är ristad.
          type: string
          example: Pr3
        certainty:
          description: Anger säkerhetsfaktorn för bedömningen. "Det här är definitivt profilstil 2"
          type: boolean
          example: true

    Provenance:
      type: object
      description: Objektrepresentation av en runinskrifts lokaliseringsinformation.
      properties:
        place:
          description: Anger platsen för var inskriftsbäraren ursprungligen kommer från.
          type: string
          example: Resmo kyrka
        parish:
          description: Anger ev. namn på socken där inskriftsbäraren hittades.
          type: string
          nullable: true
          example: Bro socken
        old_parish:
          description: Anger ev. tidigare namn på socken där inskriftsbäraren hittades.
          type: string
          nullable: true
          example: Bro socken
        hundred:
          description: Anger ev. namn på härad där inskriftsbäraren hittades.
          type: string
          nullable: true
          example: Vallentuna hd
        province:
          description: Anger ev. namn på landskap där inskriftsbäraren hittades.
          type: string
          nullable: true
          example: Västra götaland
        county:
          description: Anger ev. namn på län där inskriftsbäraren hittades.
          type: string
          nullable: true
          example: Gotland
        municipality:
          description: Anger ev. namn på kommun där inskriftsbäraren hittades.
          type: string
          nullable: true
          example: Rättvik
        country_code:
          description: |
            Anger landskod för ev. förekommande land där inskriftsbäraren hittades.
            - DK sv: 'Danmark', en: 'Denmark'
            - DE sv: 'Tyskland', en: 'Germany'
            - FI sv: 'Finland', en: 'Finland'
            - FO sv: 'Färöarna', en: 'Faroe Islands'
            - FR sv: 'Frankrike', en: 'France'
            - GL sv: 'Grönland', en: 'Greenland'
            - GR sv: 'Grekland', en: 'Greece'
            - GB_en sv: 'Storbritannien', en: 'United Kingdom'
            - GB_sc sv: 'Skottland', en: 'Scotland'
            - IE sv: 'Irland', en: 'Ireland'
            - IT sv: 'Italien', en: 'Italy'
            - IS sv: 'Island', en: 'Iceland'
            - IM sv: 'Isle of Man', en: 'Isle of Man'
            - LV sv: 'Lettland', en: 'Latvia'
            - NO sv: 'Norge', en: 'Norway'
            - NL sv: 'Nederländerna', en: 'Netherlands'
            - RU sv: 'Ryssland', en: 'Russia'
            - SE sv: 'Sverige', en: 'Sweden'
            - TR sv: 'Turkiet', en: 'Turkey'
            - UA sv: 'Ukraina', en: 'Ukraine'
            - PL sv: 'Polen', en: 'Poland'
          type: string
          enum:
            - DK
            - DE
            - FI
            - FO
            - FR
            - GL
            - GR
            - GB_en
            - GB_sc
            - IE
            - IT
            - IS
            - IM
            - LV
            - NO
            - NL
            - RU
            - SE
            - TR
            - UA
            - PL
          nullable: true
          example: SE

    OriginalLocation:
      description: Grundinformation om en inskriftsbärares ursprungliga placering.
      type: object
      properties:
        original:
          description: Beskriver om inskriftsbäraren har kvar sin ursprungliga placering eller ej.
            Notera att värdet är trinärt! Dvs det kan anta tre värden. False, true respektive null.
            Null innebär att värdet är okänt.
          type: boolean
          nullable: true
          example: false
        text:
          description: Anger ev. beskrivningstext för inskriftsbärarens ursprungliga placering.
          type: string
          nullable: true
          example: "200 m sydöst om nuvarande position."

    RunicInscription:
      description: Grundinformation för en runinskription.
      type: object
      properties:
        inscription_id:
          type: string
          format: uuid
          description: Anger identiteten (uuid) till runinskriften.
          example: ccf0a7f9-1f4c-421f-a321-0e36daea43eb
        uri:
          description: Persistent identifierare för det sammansatta objektet (runinskrift + bärare av runinskriften) (används för att hämta information från K-SAMSÖK)
          type: string
          example: http://kulturarvsdata.se/uu/srdb/7b70c89a-c191-4d73-4455fd5dd2a7
        signum1:
          description: Anger den första identitetsdelen för runinskriften, s.k signum.
            Platsbaserad. Oftast landskapskoden där runstenen hittades. Sätts samman med attribut 'signum 2'
          type: string
          example: Öl
        signum2:
          description: Anger den andra identitetssdelen för runinskriften, s.k signum.
            Anger oftast runinskriftens numrering inom platsbaserade delen. Sätts samman med attribut 'signum 1'
          type: string
          example: 10
        alternative_signa:
          description: Alternativa signa.
          type: array
          items:
            type: string
          example:
            - Liljegren 1588
            - Liljegren 1589
            - BN 4
        extant:
          description: Anger om inskriftsbäraren existerar eller ej.
          type: boolean
          example: true
        placement:
          description: Anger var inskriftsbäraren finns belägen.
          type: string
          nullable: true
          example: Kalmar läns museum (KLM 24962)
        original_location:
          $ref: '#/components/schemas/OriginalLocation'
        position:
          # Anger geografisk information om inskriftsbärarens position.
          $ref: '#/components/schemas/RunicInscriptionGeoPosition'
        provenance:
          $ref: '#/components/schemas/Provenance'
        crosses:
          description: Array av kors.
          type: array
          items:
            $ref: '#/components/schemas/Cross'
        artefact:
          description: Anger vilken typ av föremål inskriftsbäraren är av.
          nullable: true
          type: string
          example: runsten
        runic_types:
          description: Anger vilka typer av runor som använts i inskriften.
          type: array
          items:
            $ref: '#/components/schemas/RunicType'
        runic_type_descriptions:
          description: Anger fritextbeskrivningar av de typer av runor som använts i inskriften.
          type: array
          items:
            $ref: '#/components/schemas/RunicTypeDescription'
        period:
          description: Anger vilken konvention som använts vid skapandet av läsningen av inskriften.
            Är i praktiken även en grov tidsangivelse för inskriften.
          type: string
          nullable: true
          example: Vikingatid
        material:
          $ref: '#/components/schemas/RunicMaterial'
        carver:
          description: Anger vem som ristat inskriften.
          type: string
          nullable: true
          example: 'Torsten (A) [Källström 2007a:269]'
        profile_style:
          description: Anger med vilken profilstil som inskriftsbäraren är ristad. Används bara om inskriftsbäraren är en runsten.
          type: array
          items:
            $ref: '#/components/schemas/ProfileStyle'
        nmr_identifiers:
          description: Identifierare för objekt som motsvarar inskriftsbäraren i andra informationssystem (National Monument Registers).
          type: array
          items:
            $ref: '#/components/schemas/Nmr'
        notes:
          description: Fritextfält för beskrivning av inskriftsbäraren.
          type: array
          items:
            type: string
          example: Parsten till Sö 35.
        runic_texts:
          description: Array of translations of the runicinscription.
          type: array
          items:
            $ref: '#/components/schemas/RunicText'
        ornamental:
          description: Anger huruvida objektet är ornamentantalt eller ej. Om sant - så finns inga runor, bara ornament.
          type: boolean
          example: true
        image_links:
          description: Innehåller array av URL:er till bilder av objektet. Url:erna finns lagrade i SRDs databas och skördas ej till K-samsök.
          type: array
          items:
            type: string
          example:
            - >-
              http://kmb.raa.se/cocoon/bild/raa-image/16000300012834/normal/1.jpg
        references:
          description: Innehåller array av referenser till objektet. Referenserna finns lagrade i SRDs databas och skördas ej till K-samsök.
          type: array
          items:
            type: string
          example:
            - 'Fv 1975:170'
            - 'http://fornvannen.se/pdf/1970talet/1975_166.pdf'
            - 'Andersson 1998b'

    RunicInscriptionIndex:
      description: Objektrepresentation av ett sökresultat från en s.k. 'Enkel sökning' efter signum.
        Objektet består endast av s.k. signifikanta attribut.
      type: object
      properties:
        inscription_id:
          type: string
          format: uuid
          description: Anger identiteten (uuid) till runinskriften.
          example: ccf0a7f9-1f4c-421f-a321-0e36daea43eb
        signum1:
          description: Anger den första identitetsdelen för runinskriften, s.k signum.
            Platsbaserad. Oftast landskapskoden där runstenen hittades. Sätts samman med attribut 'signum 2'
          type: string
          example: Öl
        signum2:
          description: Anger den andra identitetssdelen för runinskriften, s.k signum.
            Anger oftast runinskriftens numrering inom platsbaserade delen. Sätts samman med attribut 'signum 1'
          type: string
          example: 10
        provenance:
          $ref: '#/components/schemas/Provenance'
        runic_texts:
          description: Array of translations of the runicinscription.
          type: array
          items:
            $ref: '#/components/schemas/RunicText'
        position:
          # Anger geografisk information om inskriftsbärarens position.
          $ref: '#/components/schemas/RunicInscriptionGeoPosition'

    RunicMaterial:
      type: object
      properties:
        material_free_text:
          nullable: true
          description: Fritextfält som anger det material som inskriftsbäraren består av. Fältet är ostrukturerat.
          type: string
          example: granit
        materials:
          description: Array över de material som inskriftsbäraren består av. En inskriftsbärare kan bestå av flera material.
            Attributet är en strukturerad representation av attributet 'material_fritext' ovan.
          type: array
          items:
            $ref: '#/components/schemas/Material'

    RunicText:
      type: object
      description: Objektrepresentation av en inskriftsversion.
      properties:
        reading:
          description: Anger läsningen av texten
          type: string
          example: '...-abi · þaiR --tu · raisa · stein- · eftiR · rantui · moþor sina'
        reference:
          description: Anger bokstav som identifierar vilken alternativ tolkning olika runologer har haft.
          type: string
          nullable: true
          example: 'P'
        interpretations:
          description: Array av runinskriftens tolkningar. "Snygga till stavningen".
          type: array
          items:
            $ref: '#/components/schemas/Interpretation'
        translations:
          description: Array av runinskriftens översättningar.
          type: array
          items:
            $ref: '#/components/schemas/Translation'

    RuneTextType:
      type: object
      description: Anger de olika typer av translitereringar, normaliseringar och översättningar som kan anges vid sökning på runtexter.
      required:
        - transliteration
        - normalisation
        - translation
      properties:
        transliteration:
          description: |
            Anger lista av unika stabila identiteter av translitereringar av runtexter.
            En transliterering är en översättning (tecken-för-tecken) av runtexten. Samtliga inskrifter som har text har en translitterering.
          type: array
          items:
            type: string
            enum:
              - RUN
          example: "[RUN]"
        normalisation:
          description: |
            Anger lista av unika stabila identiteter av normaliseringar av runtexter.
            En normalisering är en översättning av runtexten till något av de förekommande språk som definieras nedan.
            * FVN (Fornvästnordiska). Normalisering (översättning) av runtexten till fornvästnordiska.
            Notera att vissa runinskrifter saknar normalisering på fornvästnordiska.
            * NFS (Nationellt fornspråk). Normalisering (översättning) av runtexten till annat språk än fornvästnordiska.
            Notera att vissa runinskrifter saknar normalisering till nationellt fornspråk.
          type: array
          items:
            type: string
            enum:
              - FVN
              - NFS
          example: "[FVN, NFS]"
        translation:
          description: |
            Anger lista av unika stabila identiteter av översättningar av runtexter.
            Följande språköversättningar förekommer.
            * EN (Engelska). Normalisering (översättning) av runtexten till engelska. Notera att vissa runinskrifter saknar översättning på engelska.
            * NO (Norska). Normalisering (översättning) av runtexten till norska. Notera att vissa runinskrifter saknar översättning på norska.
            * SV (Svenska). Normalisering (översättning) av runtexten till svenska. Notera att vissa runinskrifter saknar översättning på svenska.
          type: array
          items:
            type: string
            enum:
              - EN
              - NO
              - SV
          example: "[EN, NO, SV]"

    RunicInscriptionGeoPosition:
      description: Objektrepresentation av en inskriftsbärares geografiska positioner med nuvarande och ev. ursprungligt läge att rendera på en bakgrundskarta
      type: object
      properties:
        current:
          description: Anger inskriftsbärarens senaste kända (oftast nuvarande) position. Notera att objektet kan vara null om positionen saknas!
          nullable: true
          allOf:
            - $ref: '#/components/schemas/Geometry'
        oldest_known:
          # Anger inskriftsbärarens äldsta kända position
          $ref: '#/components/schemas/Geometry'

    MapIndex:
      description: Objektrepresentation i "index" format av en inskriftsbärares signifikanta attribut.
        Innehåller geografiska positioner med nuvarande och ev. ursprungligt läge att rendera på en bakgrundskarta.
      type: object
      properties:
        inscription_id:
          description: Anger identiteten (uuid) till runinskriften.
          type: string
          format: uuid
          example: ccf0a7f9-1f4c-421f-a321-0e36daea43eb
        uri:
          description: Anger persistent identitet (uri) för runinskriften.
          type: string
          example: http://kulturarvsdata.se/uu/srdb/7b70c89a-c191-4d73-4455fd5dd2a7
        signum:
          description: Anger ett komplett signum bestående av signum1 + signum2.
          type: string
          example: Öl 10
        parish:
          description: Anger ev. namn på socken där inskriftsbäraren hittades.
          type: string
          nullable: true
          example: Bro socken
        current:
          # Anger inskriftsbärarens senaste kända (oftast nuvarande) position
          $ref: '#/components/schemas/Geometry'
        oldest_known:
          # Anger inskriftsbärarens äldsta kända position
          $ref: '#/components/schemas/Geometry'

    RunicType:
      description: Anger vilka typer av runor som använts i inskriften.
      type: object
      properties:
        type:
          type: string
          description: Anger typ av runinskrift.
          nullable: true
          example: Skiffer
        category:
          type: string
          description: Anger kategori av runinskrift.
          nullable: true
          example: Spegelvända kvistrunor

    RunicTypeDescription:
      description: Anger fritextbeskrivning av de typer av runor som använts i inskriften.
      type: object
      properties:
        text:
          type: string
          nullable: true
          example: o-runan har dubbelsidig bistav
        language:
          type: string
          nullable: true
          example: sv-se

    SearchResult:
      description: Resultat av en sökfråga
      required:
        - inscription
      type: object
      properties:
        # TODO: Ändra namn till inscriptions?
        inscription:
          $ref: '#/components/schemas/RunicInscription'

    SelectionItem:
      description: Anger ett urval (t ex socken Bro).
      required:
        - id
        - name
        - has_children
      type: object
      properties:
        id:
          type: string
          description: Anger identiteten (uuid) för urvalet
          example: c387aad1-9b4b-4c8c-ad0d-0bb4eaf605d6
        name:
          type: string
          description: Anger namnet på urvalet (lämpligt för presentation).
          example: Bro (Gotland)
        has_children:
          description: Anger om urvalsgruppen har ytterligare djup eller ej. True innebär att det finns ytterligare underliggande nivåer.
            Dessa attribut kan då undersökas vidare.
          type: boolean
          example: true

    Signum:
      description: Objektrepresentation av signum och runinskriftsidentiteter avsett för "typeahead" ändamål.
      type: object
      properties:
        signum:
          description: Innehåller ett sammansatt signum bestående av signum 1 och signum 2.
          type: string
          example: "Öl 10"
        inscriptions:
          description: |
            Anger en array av identiteter (inscription_id i form av uuid) till runinskrifter med samma signum.
            I normalfallet har ett signum en identitet som förväntat.
            Men, i undantagsfall har man återanvänt samma signum till fler än en inskrift.
            Exempel: Signumet 'B 923' har två identiteter till olika runiskrifter.
          type: array
          items:
            type: string
            format: uuid
            example: "[dcf0a7f9-1f4c-421f-a321-0e36daea43ca, 54d36a4f-82ae-4690-9dc9-bfa8f5301cea]"

    Translation:
      type: object
      description: Objektrepresentation av en översättning.
      properties:
        translation:
          description: Anger ev. översättning av texten
          type: string
          nullable: true
          example: Bengt raised this stone...
        language:
          description: Anger språket som översättningen är uttryckt i.
          type: string
          nullable: true
          example: Engelska

    SearchQuery:
      description: Sökfråga som används för att sätta sökvillkor vid avancerad sökning
      required:
        - query
      type: object
      properties:
        expression:
          description: Uttryck bestående av olika villkor, kombinerade med AND, OR och NOT
          $ref: '#/components/schemas/Expression'
        edition_id:
          type: string
          description: Anger id för önskad utgåva som sökningen ska utföras på.
          example: "2020"
      example: |
        {
          "edition_id": "2020",
          "expression": {
            "op": "And",
            "expressions": [
              {
                "op": "TimeInterval",
                "from_year": 900,
                "to_year": 999
              },
              {
                "op": "TextQueryGroup",
                "textQueries": [
                  {
                    "op": "TextQuery",
                    "matching_text": "auk",
                    "proper_name_search": "EXCLUDE",
                    "runetexttype_id": "RUN"
                  },
                  {
                    "op": "TextQuery",
                    "matching_text": "ok",
                    "proper_name_search": "EXCLUDE",
                    "runetexttype_id": "FVN"
                  }
                ],
                "notTranslationQueries": [
                  {
                    "op": "TranslationQuery",
                    "matching_text": "_Ant_",
                    "translationtype_id": "EN"
                  }
                ],
                "translationQueries": [
                  {
                    "op": "TranslationQuery",
                    "matching_text": "father",
                    "translationtype_id": "EN"
                  }
                ]
              }
            ]
          }
        }                  
    Selection:
      description: Kompletterande filter med urvalsgrupper
      allOf:
        - $ref: '#/components/schemas/Expression'
        - type: object
          required:
            - selection_group_id
            - item_id
          properties:
            selection_group_id:
              type: string
              description: Anger identiteten för urvalsgruppen
              example: LANDSKAP
            item_id:
              type: string
              description: Anger identiteten (uuid) för det specifika valet ur urvalsgruppen
              example: c387aad1-9b4b-4c8c-ad0d-0bb4eaf605d6

    TextQueryGroup:
      description: |
        En fråga som för varje variant (P, Q, R, ...) kollar om texter och översättningar matchar
        samtliga angivna villkor (textQueries, notTextQueries, translationQueries och
        notTranslationQueries).
        
        Alla TextQuery i textQueries ska matcha samma ordindex i det olika texterna i en 
        variant för att en inskrift ska inkluderas i svaret. D v s om en TextQuery matchar ord 3
        och 5, och den andra matchar ord 5 så är det en träff, men om den andra matchar ord 2 och
        4 så är det ingen träff.
        
        Fältet translationQueries bryr sig inte om vilket ord det gäller, utan där behöver bara
        sökningen matcha något ord över huvud taget.
        
        Det är alltså AND mellan frågorna i textQueries och translationQueries, d v s alla
        frågor där måste returnera träff för att det ska bli träff för hela TextQueryGroupen.

        De två negativa varianterna notTextQueries och notTranslationQueries bryr sig inte om
        ordindex: får någon av dessa en träff går inskriften bort direkt. Det är alltså OR som gäller
        här.

        Om ett fält är en tom array eller null räknas det inte med. Om alla fält skulle vara tomma
        returneras alla inskrifter som matchande.
      allOf:
        - $ref: '#/components/schemas/Expression'
        - type: object
          discriminator:
            propertyName: op
          properties:
            textQueries:
              type: array
              items:
                $ref: '#/components/schemas/TextQuery'
            notTextQueries:
              type: array
              items:
                $ref: '#/components/schemas/TextQuery'
            translationQueries:
              type: array
              items:
                $ref: '#/components/schemas/TranslationQuery'
            notTranslationQueries:
              type: array
              items:
                $ref: '#/components/schemas/TranslationQuery'

    TextQuery:
      description: Sökfråga som används för att sätta villkor för textsökning
      type: object
      required:
        - matching_text
        - proper_name_search
        - runetexttype_id
      properties:
        matching_text:
          type: string
          description: Söktext
          example: þaiR
        proper_name_search:
          type: string
          description: |
            Anger hur/om sökning skall ske i egennamn.
            Notera att namnfrågor enbart är relevanta hos normaliseringar.
          enum:
            - INCLUDE
            - EXCLUDE
            - ONLY
        runetexttype_id:
          description: |
            Anger identiteten för en specifik runtexttyp (translittering eller normalisering) sökningen skall ske i.
            Möjliga värden som kan anges är summan av alla runtexttyper.
          type: string
          enum:
            - RUN
            - FVN
            - NFS
          example: FVN

    TranslationQuery:
      description: Sökfråga som används för att sätta villkor för textsökning i översättning.
      type: object
      required:
        - matching_text
        - translationtype_id
      properties:
        matching_text:
          type: string
          description: Söktext
          example: sten
        translationtype_id:
          description: |
            Anger språk för den översättning som ska sökas i.
          type: string
          enum:
            - EN
            - NO
            - SV
          example: SV

    TimeInterval:
      description: |
        Anger årtalsbaserat intervall för att kunna uttrycka frågor av typen "sök runinskrifter daterade inom intervallet år 800-900".
        Om antingen from_year eller to_year faller inom perioden som definieras av inskriftens tpq och taq så är det en träff. 
        Kan även användas för sökning på enskilt årtal. Då sättes to_year till samma värde som from_year.
      allOf:
        - $ref: '#/components/schemas/Expression'
        - type: object
          required:
            - from_year
            - to_year
          properties:
            from_year:
              type: integer
              description: Anger start-årtal för intervallet. Angivet årtal inkluderas i sökningen.
              minLength: 1
              maxLength: 4
              example: 800
            to_year:
              type: integer
              description: Anger slut-årtal för intervallet. Angivet årtal inkluderas i sökningen.
              minLength: 1
              maxLength: 4
              example: 900

    Expression:
      description: Uttryck bestående av ett logiskt uttryck, eller ett villkor.
      oneOf:
        - $ref: '#/components/schemas/And'
        - $ref: '#/components/schemas/Or'
        - $ref: '#/components/schemas/Not'
        - $ref: '#/components/schemas/TextQueryGroup'
        - $ref: '#/components/schemas/Selection'
        - $ref: '#/components/schemas/TimeInterval'
      discriminator:
        propertyName: op

    Not:
      description: Logiskt uttryck bestående av ett uttryck som inte ska gälla.
      allOf:
        - $ref: '#/components/schemas/Expression'
        - type: object
          required:
            - child
          discriminator:
            propertyName: op
          properties:
            expression:
              $ref: '#/components/schemas/Expression'

    And:
      description: |
        Logiskt uttryck som kombinerar andra uttryck och som är sant om alla av dess underuttryck är sanna.
        Om det förekommer flera villkor av typen `TextQuery` som direkta barn till detta uttryck ska alla
        TextQuery matcha samma ord i det olika texterna för att en inskrift ska inkluderas i svaret.
      allOf:
        - $ref: '#/components/schemas/Expression'
        - type: object
          required:
            - expressions
          discriminator:
            propertyName: op
          properties:
            expressions:
              type: array
              items:
                $ref: '#/components/schemas/Expression'

    Or:
      description: |
        Logiskt uttryck som kombinerar andra uttryck och som är sant om minst ett av dess underuttryck är sant.
      allOf:
        - $ref: '#/components/schemas/Expression'
        - type: object
          required:
            - expressions
          discriminator:
            propertyName: op
          properties:
            expressions:
              type: array
              items:
                $ref: '#/components/schemas/Expression'
